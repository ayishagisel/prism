{
  "permissions": {
    "allow": [
      "Bash(export PATH=\"/opt/homebrew/opt/node@20/bin:$PATH\")",
      "Bash(npm install)",
      "Bash(npm run db:push:*)",
      "Bash(npm run seed:*)",
      "Bash(npm run db:migrate:*)",
      "Bash(npx drizzle-kit generate:*)",
      "Bash(npm run db:setup:*)",
      "Bash(npm run dev:*)",
      "Bash(ls:*)",
      "Bash(npm run build:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nFix type errors in Client components to match database schema\n\n- Update ClientCard to use industry field instead of type\n- Update AddClientModal form fields to match Client interface (industry instead of type/company)\n- Update ClientDetailModal to display industry, status, and tags\n- Fix primary_contact_email references in Client components\n- Update clients page search to filter by name and industry\n- Move responseRate calculation before KPI array in dashboard\n- Update dashboard client filter comment for future implementation\n\nâœ“ Build now passes successfully with no TypeScript errors\n\nðŸ¤– Generated with Claude Code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(curl:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nImplement Phase 3: Opportunity Detail Pages\n\nFrontend:\n- Add useOpportunityDetail hook that fetches opportunity, summary, statuses, and tasks in parallel\n- Create dynamic route: /agency/opportunities/[id]/page.tsx\n- Implement display components:\n  * OpportunityDetailHeader - Shows title, outlet, media type, deadline, status\n  * OpportunityMetadata - Displays category, topic, and industry tags\n  * ClientResponseSummary - Shows stat cards for response counts (total, pending, interested, accepted, declined, no_response)\n- Implement interactive components:\n  * ClientResponsesTable - Edit client response status and notes with validation\n  * OpportunityTasksSection - Display tasks with reassign functionality\n  * ActivityLog - Timeline view of all state changes and updates\n- Add API client methods for summary and statuses endpoints\n- Handle loading, error states, and 404 cases\n\nFeatures:\nâœ“ View complete opportunity details with all related data\nâœ“ Edit client response status with state machine validation\nâœ“ Add/update agency notes for client responses\nâœ“ Reassign follow-up tasks to different team members\nâœ“ View activity/audit log timeline of all changes\nâœ“ Responsive design on mobile and desktop\nâœ“ Real-time data refresh after mutations\n\nTesting:\nâœ“ Build passes with no TypeScript errors\nâœ“ Dynamic route properly registered in Next.js\nâœ“ All API endpoints verified and working\nâœ“ Components properly imported and exported\n\nðŸ¤– Generated with Claude Code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(cat:*)",
      "Bash(pkill:*)",
      "Bash(lsof:*)",
      "Bash(xargs kill -9)",
      "Bash(npm install:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nImplement Phase 2 Zoho CRM Integration Foundation\n\nBackend:\n- Create Zoho configuration module (config/zoho.ts)\n  * OAuth endpoints for multiple Zoho realms (us, eu, in, au, jp, ca)\n  * Configuration validation and realm-specific URL resolution\n- Create Zoho service (modules/zoho/zoho.service.ts)\n  * OAuth token management (exchange, refresh, storage)\n  * Zoho Deals â†’ PRISM Opportunities sync\n  * Zoho Accounts â†’ PRISM Clients sync\n  * Smart field mapping and media type normalization\n  * Webhook event handling framework\n- Create Zoho controller (modules/zoho/zoho.controller.ts)\n  * GET /api/zoho/authorize - Get OAuth authorization URL\n  * POST /api/zoho/callback - Handle OAuth callback\n  * POST /api/zoho/sync - Trigger manual sync\n  * GET /api/zoho/status - Check connection status\n  * POST /api/webhooks/zoho - Receive Zoho webhook events\n- Update database schema\n  * Add zoho_id field to opportunities table\n  * Add zoho_id field to clients table\n  * Create new zohoTokens table with OAuth token storage\n  * Add indexes for efficient lookups during sync\n- Add Zoho routes to Express app (app.ts)\n- Update environment variables (.env.example)\n\nDocumentation:\n- Create ZOHO_SETUP_GUIDE.md (comprehensive 7-step setup process)\n  * Zoho Developer Console OAuth application creation\n  * Zoho Organization ID and Realm identification\n  * PRISM environment variable configuration\n  * Connection testing and troubleshooting\n  * Webhook setup for real-time updates\n  * Production deployment checklist\n- Create PHASE2_ZOHO_FOUNDATION.md (implementation summary)\n  * Architecture overview\n  * OAuth and sync flow diagrams\n  * Field mapping reference\n  * Security features\n  * Next steps and timeline\n- Create API_REFERENCE.md (complete API documentation)\n  * All authentication endpoints\n  * All resource CRUD endpoints\n  * Zoho integration endpoints\n  * Error response formats\n  * Data type enumerations\n\nSecurity:\nâœ“ Secure OAuth 2.0 implementation (authorization code flow)\nâœ“ CSRF protection via state tokens\nâœ“ Automatic token refresh before expiry\nâœ“ Secure token storage in database (never exposed to frontend)\nâœ“ Multi-tenant token isolation (scoped to agency_id)\nâœ“ Database-backed tenancy enforcement\n\nTesting:\nâœ“ TypeScript: 0 errors\nâœ“ Build: Successful\nâœ“ All type safety checks: Pass\n\nStatus: Ready for Zoho developer credentials integration\nTimeline: Foundation complete - awaiting credentials to activate\n\nðŸ¤– Generated with Claude Code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")"
    ],
    "deny": [],
    "ask": []
  }
}
